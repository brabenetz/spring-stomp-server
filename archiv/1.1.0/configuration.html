<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 at 03. Nov 2023 11:24 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20231103" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Spring Stomp Server &#x2013; Configuration</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="https://github.com/brabenetz/spring-stomp-server">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://spring-stomp-server.brabenetz.net" id="bannerLeft">
                <h2>Spring Stomp Server</h2>
                </a>
                      </div>
        <div class="pull-right">                  <a href="https://github.com/brabenetz/spring-stomp-server" id="bannerRight">
                                                                                                <img src="images/github-logo-37px.png"  alt="GitHub"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 03. Nov 2023 11:24
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.1.0
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Spring Stomp Server</li>
                              
      <li>
  
                          <a href="index.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>Configuration</a>
          </li>
                
      <li>
  
                          <a href="changes-report.html" title="Changes">
          <span class="none"></span>
        Changes</a>
            </li>
                
      <li>
  
                          <a href="https://brabenetz.github.io/spring-stomp-server/archiv/" class="externalLink" title="Archiv">
          <span class="none"></span>
        Archiv</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="spring-stomp-server.brabenetz.net" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Configuration</h1>
<p>&#x201c;java -jar spring-stomp-server.jar&#x201d; is a valid call with following default behaviors:</p>
<p>The following config matches the default values which can be overwritten</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">server.port: 8182
spring-stomp-server:
  websocket-endpoints:
  - &quot;/websocket&quot;
  destination-prefixes:
  - &quot;/topic&quot;
  - &quot;/app&quot;
  - &quot;/user&quot;
  with-sock-js: false
  message-size-limit: 65536       # 64k
  send-buffer-size-limit: 524288  # 512k
  send-time-limit: 10000          # 10s
  time-to-first-message: 60000    # 1m
  broker-registry-cache-limit: 1024
  channel-inbound-core-pool-size: 1
  channel-outbound-core-pool-size: 1
  channel-broker-core-pool-size: 1
  init-load:
    destination-patterns: &quot;^/user/[^/]+/topic/(.*)&quot;
    proxy-url: &quot;http://localhost:8181/mocked-init-load/${group-1}&quot;
</pre></div></div>
<section>
<h2><a name="server.port"></a>server.port</h2>
<p>The Server HTTP port on which the Spring-Stomp-Server should run.</p>
<p>Default is 8182</p>
<p>See also <a class="externalLink" href="https://docs.spring.io/spring-boot/docs/2.4.0-M1/reference/html/appendix-application-properties.html#server-properties">https://docs.spring.io/spring-boot/docs/2.4.0-M1/reference/html/appendix-application-properties.html#server-properties</a></p></section><section>
<h2><a name="websocket-endpoints"></a>websocket-endpoints</h2>
<p>The default endpoints is &#x201c;/websocket&#x201d;.</p>
<p>See <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/StompEndpointRegistry.html#addEndpoint-java.lang.String...-">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/StompEndpointRegistry.html#addEndpoint-java.lang.String...-</a></p></section><section>
<h2><a name="destination-prefixes"></a>destination-prefixes</h2>
<p>The default stomp destination prefixes are &#x201c;/topic&#x201d;, &#x201c;/app&#x201d;, &#x201c;/user&#x201d;.</p>
<p>See <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/messaging/simp/config/MessageBrokerRegistry.html#enableSimpleBroker-java.lang.String...-">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/messaging/simp/config/MessageBrokerRegistry.html#enableSimpleBroker-java.lang.String...-</a></p></section><section>
<h2><a name="with-sock-js"></a>with-sock-js</h2>
<p>If true, it enables an additional Stomp-Listener for Stock-Js.</p>
<p>Default is false.</p>
<p>See <a class="externalLink" href="https://stomp-js.github.io/guide/stompjs/rx-stomp/ng2-stompjs/using-stomp-with-sockjs.html">https://stomp-js.github.io/guide/stompjs/rx-stomp/ng2-stompjs/using-stomp-with-sockjs.html</a> <br />
See <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/StompWebSocketEndpointRegistration.html#withSockJS--">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/StompWebSocketEndpointRegistration.html#withSockJS--</a></p></section><section>
<h2><a name="message-size-limit"></a>message-size-limit</h2>
<p>Configure the maximum size of an inbound sub-protocol message, such as a STOMP frame which may be aggregated from multiple WebSocket messages.</p>
<p>The default value is 64K (i.e. 64 * 1024).</p>
<p>See <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setMessageSizeLimit-int-">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setMessageSizeLimit-int-</a></p></section><section>
<h2><a name="send-buffer-size-limit"></a>send-buffer-size-limit</h2>
<p>Configure the maximum amount of data to buffer when sending messages to a WebSocket session, or an HTTP response when SockJS fallback option are in use.</p>
<p>The default value is 512K (i.e. 512 * 1024).</p>
<p>See <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setSendBufferSizeLimit-int-">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setSendBufferSizeLimit-int-</a></p></section><section>
<h2><a name="send-time-limit"></a>send-time-limit</h2>
<p>Configure a time limit (in milliseconds) for the maximum amount of a time allowed when sending messages to a WebSocket session or writing to an HTTP response when SockJS fallback option are in use.</p>
<p>The default value is 10 seconds (i.e. 10 * 10000).</p>
<p>See <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setSendTimeLimit-int-">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setSendTimeLimit-int-</a></p></section><section>
<h2><a name="time-to-first-message"></a>time-to-first-message</h2>
<p>Set the maximum time allowed in milliseconds after the WebSocket connection is established and before the first subscribe-protocol message is received.</p>
<p>By default this is set to 60,000 (1 minute).</p>
<p>See  <a class="externalLink" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setTimeToFirstMessage-int-">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/config/annotation/WebSocketTransportRegistration.html#setTimeToFirstMessage-int-</a></p></section><section>
<h2><a name="broker-registry-cache-limit"></a>broker-registry-cache-limit</h2>
<p>The cache limit to apply for registrations with the broker.</p>
<p>This is currently only applied for the destination cache in the subscription registry. The default cache limit there is 1024.</p>
<p>For performance-testing read <a class="externalLink" href="https://programmersought.com/article/58855147686/">https://programmersought.com/article/58855147686/</a> <br />
&#x2026; There is a fatal weakness in SimpleBrokerMessageHandler &#x2026; <br />
&#x2026; If the cache size exceeds the cacheLimit value, the original old The data is cleaned up, and when it is read again &#x2026;</p></section><section>
<h2><a name="channel-inbound-core-pool-size"></a>channel-inbound-core-pool-size</h2>
<p>The MessageChannel PoolSize used for incoming messages from WebSocket clients. <br />
See WebSocketMessageBrokerConfigurer#configureClientInboundChannel(&#x2026;)</p>
<p>By default the channel is backedby a thread pool of size 1.</p></section><section>
<h2><a name="channel-outbound-core-pool-size"></a>channel-outbound-core-pool-size</h2>
<p>The MessageChannel PoolSize used for outbound messages to WebSocket clients. <br />
See {WebSocketMessageBrokerConfigurer#configureClientOutboundChannel(&#x2026;)</p>
<p>By default the channel is backed by a thread pool of size 1.</p></section><section>
<h2><a name="channel-broker-core-pool-size"></a>channel-broker-core-pool-size</h2>
<p>The channel PoolSize used to send messages from the application to the message broker.</p>
<p>By default, messages from the application to the message broker are sent synchronously, which means application code sending a message will find out if the message cannot be sent through an exception. <br />
However, this can be changed if the broker channel is configured here with task executor properties.</p></section><section>
<h2><a name="init-load:"></a>init-load:</h2>
<p>The init-load is optional, if not proxy-url is configured, then this feature is disabled.</p></section><section>
<h2><a name="init-load.destinationPatterns"></a>init-load.destinationPatterns</h2>
<p>The Websocket Subscription destination pattern like &#x201c;/user/00001111-2222-3333-4444-555566667777/topic/&#x2026;&#x201d;.</p>
<p>Default: &#x201c;^/user/[^/]+/topic/(.*)$&#x201d;</p></section><section>
<h2><a name="init-load.proxy-url"></a>init-load.proxy-url</h2>
<p>The proxy url from where the init load should be get, like: &#x201c;<a class="externalLink" href="http://localhost:8181/my-mock-endpoint/${group-1}">http://localhost:8181/my-mock-endpoint/${group-1}</a>&#x201d;.</p>
<p>Only GET requests are supported. <br />
${group-1}, ${group-2}, ${group-3}, &#x2026; ${group-X} reference to the group-pattern from getDestinationPatterns(). The Proxy-Server can then be a Mock-Server like <a class="externalLink" href="https://wiremock.org/">https://wiremock.org/</a>. With WireMock you can change the mocks on the fly via API for automatic tests.</p></section>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2020&#x2013;2023
                        <a href="http://brabenetz.net">Brabenetz Harald, Austria</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
